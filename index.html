<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>抽獎表格</title>
    <style>
        .low-probability {
            font-weight: bold;
            color: red;
        }
    </style>
</head>

<body>
    <div class="container">
        <h2>2024 6月轉蛋Ⅰ</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>物品</th>
                    <th>數量</th>
                    <th>轉蛋機率</th>
                    <th>備註</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>擴音器[轉蛋專用]</td>
                    <td>5</td>
                    <td>12.960%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>狂暴蟻后卷軸[轉蛋專用]</td>
                    <td>5</td>
                    <td>12.960%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>風靈鎧甲卷軸</td>
                    <td>2</td>
                    <td>12.960%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>天使之賜福 10等級卷軸[轉蛋專用]</td>
                    <td>5</td>
                    <td>12.960%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>隨地倉庫使用券[轉蛋專用]</td>
                    <td>5</td>
                    <td>12.960%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>靈巧棒棒條[轉蛋專用]</td>
                    <td>5</td>
                    <td>8.000%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>活力激發劑</td>
                    <td>2</td>
                    <td>8.000%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>力量防護卷軸</td>
                    <td>3</td>
                    <td>8.000%</td>
                    <td>不可交易</td>
                </tr>
                <tr>
                    <td>變身卷軸秘笈</td>
                    <td>2</td>
                    <td>2.500%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>髮型精靈合成箱</td>
                    <td>1</td>
                    <td>1.500%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>真力量防護卷軸</td>
                    <td>3</td>
                    <td>1.500%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>忽克連影子精煉鎚</td>
                    <td>1</td>
                    <td>1.050%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>修羅假髮禮盒</td>
                    <td>1</td>
                    <td>1.000%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>服飾附魔石精靈合成箱</td>
                    <td>1</td>
                    <td>1.000%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>影子職業屬性咒語(魔法)</td>
                    <td>3</td>
                    <td>0.205%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>影子職業屬性咒語(物理)</td>
                    <td>3</td>
                    <td>0.205%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>影子特性屬性咒語</td>
                    <td>2</td>
                    <td>0.200%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>(服飾)魅力閃電之力</td>
                    <td>1</td>
                    <td>0.200%</td>
                    <td>可附魔</td>
                </tr>
                <tr>
                    <td>影子創造手套</td>
                    <td>1</td>
                    <td>0.200%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>影子創造神盾</td>
                    <td>1</td>
                    <td>0.200%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>影子專注手套</td>
                    <td>1</td>
                    <td>0.200%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>影子專注神盾</td>
                    <td>1</td>
                    <td>0.200%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>英雄武器-LT物理改造裝置</td>
                    <td>2</td>
                    <td>0.150%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>英雄武器-LT魔法改造裝置</td>
                    <td>2</td>
                    <td>0.150%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>活力信念武器精煉鎚</td>
                    <td>1</td>
                    <td>0.125%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>將領軍帽</td>
                    <td>1</td>
                    <td>0.075%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>背飾精靈合成箱</td>
                    <td>1</td>
                    <td>0.075%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>(服飾)古代盧恩符文</td>
                    <td>1</td>
                    <td>0.060%</td>
                    <td>可附魔</td>
                </tr>
                <tr>
                    <td>英雄吊墜蛋</td>
                    <td>1</td>
                    <td>0.060%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>精煉能力券信封</td>
                    <td>1</td>
                    <td>0.050%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>叛亂軍鎖鍊</td>
                    <td>1</td>
                    <td>0.050%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>祈禱的黃昏鐘(魂靈師)</td>
                    <td>1</td>
                    <td>0.050%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>聖之羽翼神盾</td>
                    <td>1</td>
                    <td>0.045%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>附魔票3入禮券</td>
                    <td>1</td>
                    <td>0.040%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>吞神魔盾-闇嗜</td>
                    <td>1</td>
                    <td>0.035%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>影子全然體型選擇箱</td>
                    <td>1</td>
                    <td>0.030%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>懺悔勇氣冠冕</td>
                    <td>1</td>
                    <td>0.025%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>伊美樂心臟能量石</td>
                    <td>1</td>
                    <td>0.010%</td>
                    <td></td>
                </tr>
                <tr>
                    <td>王水瓶</td>
                    <td>1</td>
                    <td>0.005%</td>
                    <td>不可交易</td>
                </tr>
                <tr>
                    <td>絕望之神夢羅克卡片</td>
                    <td>1</td>
                    <td>0.005%</td>
                    <td></td>
                </tr>
            </tbody>
        </table>
        <div class="form-group">
            <label for="quantity">請輸入數量:</label>
            <input type="number" class="form-control" id="quantity">
        </div>
        <button type="button" class="btn btn-primary" onclick="抽獎()">開始抽獎</button>
        <div id="抽獎結果" class="mt-4">
            <!-- 這裡會顯示抽獎結果 -->
        </div>
    </div>

    <script>
        function 抽獎() {
            var 數量 = document.getElementById("quantity").value;

            var items = [
                ["擴音器[轉蛋專用]", 5, 0.12960],
                ["狂暴蟻后卷軸[轉蛋專用]", 5, 0.12960],
                ["風靈鎧甲卷軸", 2, 0.12960],
                ["天使之賜福 10等級卷軸[轉蛋專用]", 5, 0.12960],
                ["隨地倉庫使用券[轉蛋專用]", 5, 0.12960],
                ["靈巧棒棒條[轉蛋專用]", 5, 0.08000],
                ["活力激發劑", 2, 0.08000],
                ["力量防護卷軸", 3, 0.08000],
                ["變身卷軸秘笈", 2, 0.02500],
                ["髮型精靈合成箱", 1, 0.01500],
                ["真力量防護卷軸", 3, 0.01500],
                ["忽克連影子精煉鎚", 1, 0.01050],
                ["修羅假髮禮盒", 1, 0.01000],
                ["服飾附魔石精靈合成箱", 1, 0.01000],
                ["影子職業屬性咒語(魔法)", 3, 0.00205],
                ["影子職業屬性咒語(物理)", 3, 0.00205],
                ["影子特性屬性咒語", 2, 0.00200],
                ["(服飾)魅力閃電之力", 1, 0.00200],
                ["影子創造手套", 1, 0.00200],
                ["影子創造神盾", 1, 0.00200],
                ["影子專注手套", 1, 0.00200],
                ["影子專注神盾", 1, 0.00200],
                ["英雄武器-LT物理改造裝置", 2, 0.00150],
                ["英雄武器-LT魔法改造裝置", 2, 0.00150],
                ["活力信念武器精煉鎚", 1, 0.00125],
                ["將領軍帽", 1, 0.00075],
                ["背飾精靈合成箱", 1, 0.00075],
                ["(服飾)古代盧恩符文", 1, 0.00060],
                ["英雄吊墜蛋", 1, 0.00060],
                ["精煉能力券信封", 1, 0.00050],
                ["叛亂軍鎖鍊", 1, 0.00050],
                ["祈禱的黃昏鐘(魂靈師)", 1, 0.00050],
                ["聖之羽翼神盾", 1, 0.00045],
                ["附魔票3入禮券", 1, 0.00040],
                ["吞神魔盾-闇嗜", 1, 0.00035],
                ["影子全然體型選擇箱", 1, 0.00030],
                ["懺悔勇氣冠冕", 1, 0.00025],
                ["伊美樂心臟能量石", 1, 0.00010],
                ["王水瓶", 1, 0.00005],
                ["絕望之神夢羅克卡片", 1, 0.00005],
            ]

            var 抽獎結果 = {};

            for (var i = 0; i < 數量; i++) {
                var 隨機數 = Math.random(); // 生成0到1之間的隨機數

                var 抽中的索引 = -1;
                var cumulativeProbability = 0;
                for (var j = 0; j < items.length; j++) {
                    cumulativeProbability += items[j][2];
                    if (隨機數 < cumulativeProbability) {
                        抽中的索引 = j;
                        break;
                    }
                }

                if (抽中的索引 !== -1) {
                    var 抽中的物品 = { "名稱": items[抽中的索引][0], "機率": items[抽中的索引][2] };
                    if (抽中的物品.名稱 in 抽獎結果) {
                        抽獎結果[抽中的物品.名稱]++;
                    } else {
                        抽獎結果[抽中的物品.名稱] = 1;
                    }
                } else {
                    if ("未中獎" in 抽獎結果) {
                        抽獎結果["未中獎"]++;
                    } else {
                        抽獎結果["未中獎"] = 1;
                    }
                }
            }

            var 結果區域 = document.getElementById("抽獎結果");
            var 顯示結果 = "抽獎結果:<br>";

            for (var key in 抽獎結果) {
                if (抽獎結果.hasOwnProperty(key)) {
                    var prize = key;
                    var amount = 抽獎結果[key];
                    if (amount > 1) {
                        prize += " x" + amount;
                    }
                    顯示結果 += prize + "<br>";
                }
            }

            結果區域.innerHTML = 顯示結果;
            window.scrollTo(0, document.body.scrollHeight);
        }
    </script>
</body>

</html>